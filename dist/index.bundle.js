"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[826],{852:(e,t,r)=>{const n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!1,a="",s=(e=e.trim()).length;if(t&&e.length<=0)return{isError:i=!0,msg:a="This field is Required!"};if(r>0&&s<r)return{isError:i=!0,msg:a="The min character length of this field is ".concat(r)};if(n>0&&s>n)return{isError:i=!0,msg:a="The max character length of this field is ".concat(n)};if(!o){var c=e.replace(/\s/g,""),l=/^[A-Za-z][A-Za-z0-9-_.]*$/;if(!l.test(c))return{isError:i=!0,msg:a="This field is only allow A-z0-9_.- characters and also first character should be A-z"}}return{isError:i,msg:a}};var o=document.getElementById("description"),i=document.querySelector(".show-msg"),a=document.querySelector(".btn-submit"),s=document.querySelector(".todo-items-gropu");document.querySelectorAll(".todo-des");const c=r.p+"images/three-dot-24.png",l=r.p+"images/trash-24.png";function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function v(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}var h=v((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"sortAndSave",(function(){var e=u(t.todos);e.sort((function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}));var r=0;e.forEach((function(e){r+=1,e.index=r})),t.todos=u(e),localStorage.setItem("todos",JSON.stringify(t.todos))})),p(this,"render",(function(){s.innerHTML="",i.innerText="",i.classList.remove("form-error"),t.sortAndSave(),t.todos.length>0?t.todos.forEach((function(e){var r=document.createElement("li");r.id=e.index,r.className="todo-item";var n=document.createElement("input");n.setAttribute("type","checkbox"),n.id="todo-compleate";var o=document.createElement("p");o.className="todo-des",o.innerText=e.description,o.addEventListener("click",(function(e){t.onClickTodoDes(e)}));var i=document.createElement("button");i.className="btn-three-dot",i.innerHTML='<img src="'.concat(c,'" alt="...">'),r.append(n,o,i),s.appendChild(r)})):s.innerHTML='<p class="no-item">There is no todo to show! Please add a new one.</p>'})),p(this,"onSubmit",(function(){var e=o.value,r=n(e,!0,3,255,!1);if(!0===r.isError&&r.msg.length>=0)i.classList.add("form-error"),i.textContent=r.msg,o.classList.add("invalid");else{i.classList.remove("form-error"),i.textContent="",o.classList.remove("invalid"),o.value="";var a={description:e,completed:!1,index:t.todos.length+1||1};t.todos=[].concat(u(t.todos),[a]),t.render()}})),p(this,"delete",(function(e){t.todos=t.todos.filter((function(t){return t.index.toString()!==e})),t.render()})),p(this,"edit",(function(e){var r=e.target.value,o=n(r,!0,3,255,!1);if(!0===o.isError&&o.msg.length>0)i.classList.add("form-error"),i.textContent=o.msg,e.target.classList.add("invalid-edit");else{e.target.classList.remove("invalid-edit");var a=e.target.parentElement.id,s=u(t.todos),c=s.findIndex((function(e){return a===e.index.toString()}));c>=0&&(s[c].description=r),t.todos=u(s),t.render()}})),p(this,"onClickTodoDes",(function(e){var r=e.target.parentElement;r.innerHTML="";var n=document.createElement("input");n.setAttribute("type","checkbox"),n.id="todo-compleate";var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("value",e.target.innerText),o.className="todo-edit-input",o.addEventListener("keypress",(function(e){"Enter"===e.key?(e.preventDefault(),t.edit(e)):(i.classList.remove("form-error"),i.innerText="",e.target.classList.remove("invalid-edit"))}));var a=document.createElement("button");a.className="btn-delete",a.innerHTML='<img src="'.concat(l,'" alt="X">'),a.addEventListener("click",(function(){var e=r.id;t.delete(e)})),r.append(n,o,a)})),localStorage.getItem("todos")?this.todos=JSON.parse(localStorage.getItem("todos")):this.todos=[]}));const b=r.p+"images/enter-24.png";var y=new h;o.addEventListener("keypress",(function(e){"Enter"===e.key?(e.preventDefault(),y.onSubmit()):(i.innerHTML="",i.classList.remove("form-error"),o.classList.remove("invalid"))})),a.addEventListener("click",(function(e){e.preventDefault(),y.onSubmit(),o.value=""})),window.onload=function(){y.render(),document.querySelector(".btn-submit").innerHTML="<img src='".concat(b,"' alt='submit'/>")}}},e=>{e(e.s=852)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJvR0E0Q0EsUUE1Q3FCLFNBQ25CQSxHQUNHLElBREVDLEVBQVcsVUFBSCw4Q0FBVUMsRUFBWSxVQUFILDZDQUFHLEVBQUdDLEVBQVksVUFBSCw2Q0FBRyxFQUFHQyxJQUFjLFVBQUgsK0NBRTVEQyxHQUFVLEVBQ1ZDLEVBQU0sR0FFSkMsR0FETlAsRUFBTUEsRUFBSVEsUUFDTUMsT0FFaEIsR0FBSVIsR0FDRUQsRUFBSVMsUUFBVSxFQUdoQixNQUFPLENBQUVKLFFBRlRBLEdBQVUsRUFFUUMsSUFEbEJBLEVBQU0sMkJBS1YsR0FBSUosRUFBWSxHQUNWSyxFQUFNTCxFQUdSLE1BQU8sQ0FBRUcsUUFGVEEsR0FBVSxFQUVRQyxJQURsQkEsRUFBTSw2Q0FBSCxPQUFnREosSUFLdkQsR0FBSUMsRUFBWSxHQUNWSSxFQUFNSixFQUdSLE1BQU8sQ0FBRUUsUUFGVEEsR0FBVSxFQUVRQyxJQURsQkEsRUFBTSw2Q0FBSCxPQUFnREgsSUFLdkQsSUFBS0MsRUFBYSxDQUNoQixJQUFNTSxFQUFTVixFQUFJVyxRQUFRLE1BQU8sSUFDNUJDLEVBQUssNEJBQ1gsSUFBS0EsRUFBR0MsS0FBS0gsR0FHWCxNQUFPLENBQUVMLFFBRlRBLEdBQVUsRUFFUUMsSUFEbEJBLEVBQU0sdUZBR1YsQ0FDQSxNQUFPLENBQUVELFFBQUFBLEVBQVNDLElBQUFBLEVBQ3BCLEVDMUNPLElBQU1RLEVBQVlDLFNBQVNDLGVBQWUsZUFDcENDLEVBQVVGLFNBQVNHLGNBQWMsYUFDakNDLEVBQVlKLFNBQVNHLGNBQWMsZUFDbkNFLEVBQWdCTCxTQUFTRyxjQUFjLHFCQUN4QkgsU0FBU00saUJBQWlCLGEsNnNEQ0NOLElBRTNCQyxFQUFLLEdBQ3hCLGFBQWMsWSw0RkFBQSwrQkFRQSxXQUNaLElBQU1DLEVBQVUsRUFBSSxFQUFLQyxPQUV6QkQsRUFBUUUsTUFBSyxTQUFDQyxFQUFHQyxHQUNmLE9BQUlELEVBQUVFLE1BQVFELEVBQUVDLE1BQ1AsRUFDSEYsRUFBRUUsTUFBUUQsRUFBRUMsT0FDUixFQUVILENBQ1QsSUFHQSxJQUFJQSxFQUFRLEVBQ1pMLEVBQVFNLFNBQVEsU0FBQ0MsR0FDZkYsR0FBUyxFQUNURSxFQUFLRixNQUFRQSxDQUNmLElBRUEsRUFBS0osTUFBUSxFQUFJRCxHQUNqQlEsYUFBYUMsUUFBUSxRQUFTQyxLQUFLQyxVQUFVLEVBQUtWLE9BQ3BELElBQUMsaUJBR1EsV0FDUEosRUFBY2UsVUFBWSxHQUMxQmxCLEVBQVFtQixVQUFZLEdBQ3BCbkIsRUFBUW9CLFVBQVVDLE9BQU8sY0FDekIsRUFBS0MsY0FDRCxFQUFLZixNQUFNZixPQUFTLEVBQ3RCLEVBQUtlLE1BQU1LLFNBQVEsU0FBQ0MsR0FFbEIsSUFBTVUsRUFBV3pCLFNBQVMwQixjQUFjLE1BQ3hDRCxFQUFTRSxHQUFLWixFQUFLRixNQUNuQlksRUFBU0csVUFBWSxZQUdyQixJQUFNQyxFQUFXN0IsU0FBUzBCLGNBQWMsU0FDeENHLEVBQVNDLGFBQWEsT0FBUSxZQUM5QkQsRUFBU0YsR0FBSyxpQkFHZCxJQUFNSSxFQUFVL0IsU0FBUzBCLGNBQWMsS0FDdkNLLEVBQVFILFVBQVksV0FDcEJHLEVBQVFWLFVBQVlOLEVBQUtpQixZQUd6QkQsRUFBUUUsaUJBQWlCLFNBQVMsU0FBQ0MsR0FDakMsRUFBS0MsZUFBZUQsRUFDdEIsSUFHQSxJQUFNRSxFQUFpQnBDLFNBQVMwQixjQUFjLFVBQzlDVSxFQUFlUixVQUFZLGdCQUMzQlEsRUFBZWhCLFVBQVksYUFBSCxPQUFnQmlCLEVBQVksZ0JBR3BEWixFQUFTYSxPQUFPVCxFQUFVRSxFQUFTSyxHQUduQy9CLEVBQWNrQyxZQUFZZCxFQUM1QixJQUVBcEIsRUFBY2UsVUFBWSx3RUFFOUIsSUFBQyxtQkFHVSxXQUVULElBQU1ZLEVBQWNqQyxFQUFVeUMsTUFLeEJDLEVBQVVDLEVBQWFWLEdBSlosRUFDQyxFQUNBLEtBQ0UsR0FLcEIsSUFBd0IsSUFBcEJTLEVBQVFuRCxTQUFvQm1ELEVBQVFsRCxJQUFJRyxRQUFVLEVBQ3BEUSxFQUFRb0IsVUFBVXFCLElBQUksY0FDdEJ6QyxFQUFRMEMsWUFBY0gsRUFBUWxELElBQzlCUSxFQUFVdUIsVUFBVXFCLElBQUksZUFDbkIsQ0FFTHpDLEVBQVFvQixVQUFVQyxPQUFPLGNBQ3pCckIsRUFBUTBDLFlBQWMsR0FDdEI3QyxFQUFVdUIsVUFBVUMsT0FBTyxXQUMzQnhCLEVBQVV5QyxNQUFRLEdBQ2xCLElBQ016QixFQUFPLENBQ1hpQixZQUFBQSxFQUNBYSxXQUFXLEVBQ1hoQyxNQUpZLEVBQUtKLE1BQU1mLE9BQVMsR0FBSyxHQU12QyxFQUFLZSxNQUFRLEdBQUgsU0FBTyxFQUFLQSxPQUFLLENBQUVNLElBRTdCLEVBQUsrQixRQUNQLENBQ0YsSUFBQyxpQkFFUSxTQUFDakMsR0FDUixFQUFLSixNQUFRLEVBQUtBLE1BQU1zQyxRQUFPLFNBQUNDLEdBQUMsT0FBS0EsRUFBRW5DLE1BQU1vQyxhQUFlcEMsQ0FBSyxJQUNsRSxFQUFLaUMsUUFDUCxJQUFDLGVBR00sU0FBQ1osR0FDTixJQUFRTSxFQUFVTixFQUFFZ0IsT0FBWlYsTUFPRkMsRUFBVUMsRUFBYUYsR0FKWixFQUNDLEVBQ0EsS0FDRSxHQUVwQixJQUF3QixJQUFwQkMsRUFBUW5ELFNBQW9CbUQsRUFBUWxELElBQUlHLE9BQVMsRUFDbkRRLEVBQVFvQixVQUFVcUIsSUFBSSxjQUN0QnpDLEVBQVEwQyxZQUFjSCxFQUFRbEQsSUFDOUIyQyxFQUFFZ0IsT0FBTzVCLFVBQVVxQixJQUFJLG9CQUNsQixDQUNMVCxFQUFFZ0IsT0FBTzVCLFVBQVVDLE9BQU8sZ0JBQzFCLElBQU1WLEVBQVFxQixFQUFFZ0IsT0FBT0MsY0FBY3hCLEdBQy9CeUIsRUFBUyxFQUFJLEVBQUszQyxPQUNsQjRDLEVBQU9ELEVBQU9FLFdBQVUsU0FBQ0MsR0FBSSxPQUFLMUMsSUFBVTBDLEVBQUsxQyxNQUFNb0MsVUFBVSxJQUNuRUksR0FBUSxJQUNWRCxFQUFPQyxHQUFNckIsWUFBY1EsR0FFN0IsRUFBSy9CLE1BQVEsRUFBSTJDLEdBQ2pCLEVBQUtOLFFBQ1AsQ0FDRixJQUFDLHlCQUdnQixTQUFDWixHQUVoQixJQUFNc0IsRUFBU3RCLEVBQUVnQixPQUFPQyxjQUN4QkssRUFBT3BDLFVBQVksR0FHbkIsSUFBTVMsRUFBVzdCLFNBQVMwQixjQUFjLFNBQ3hDRyxFQUFTQyxhQUFhLE9BQVEsWUFDOUJELEVBQVNGLEdBQUssaUJBR2QsSUFBTThCLEVBQWdCekQsU0FBUzBCLGNBQWMsU0FDN0MrQixFQUFjM0IsYUFBYSxPQUFRLFFBQ25DMkIsRUFBYzNCLGFBQWEsUUFBU0ksRUFBRWdCLE9BQU83QixXQUM3Q29DLEVBQWM3QixVQUFZLGtCQUcxQjZCLEVBQWN4QixpQkFBaUIsWUFBWSxTQUFDQyxHQUM1QixVQUFWQSxFQUFFd0IsS0FDSnhCLEVBQUV5QixpQkFDRixFQUFLQyxLQUFLMUIsS0FFVmhDLEVBQVFvQixVQUFVQyxPQUFPLGNBQ3pCckIsRUFBUW1CLFVBQVksR0FDcEJhLEVBQUVnQixPQUFPNUIsVUFBVUMsT0FBTyxnQkFFOUIsSUFHQSxJQUFNc0MsRUFBYTdELFNBQVMwQixjQUFjLFVBQzFDbUMsRUFBV2pDLFVBQVksYUFDdkJpQyxFQUFXekMsVUFBWSxhQUFILE9BQWdCMEMsRUFBVSxjQUc5Q0QsRUFBVzVCLGlCQUFpQixTQUFTLFdBQ25DLElBQU1wQixFQUFRMkMsRUFBTzdCLEdBQ3JCLEVBQUksT0FBUWQsRUFDZCxJQUVBMkMsRUFBT2xCLE9BQU9ULEVBQVU0QixFQUFlSSxFQUN6QyxJQXJMTTdDLGFBQWErQyxRQUFRLFNBQ3ZCQyxLQUFLdkQsTUFBUVMsS0FBSytDLE1BQU1qRCxhQUFhK0MsUUFBUSxVQUU3Q0MsS0FBS3ZELE1BQVEsRUFFakIsSSxrQ0NKRixJQUFNQSxFQUFRLElBQUlGLEVBR2xCUixFQUFVa0MsaUJBQWlCLFlBQVksU0FBQ0MsR0FDeEIsVUFBVkEsRUFBRXdCLEtBQ0p4QixFQUFFeUIsaUJBQ0ZsRCxFQUFNeUQsYUFFTmhFLEVBQVFrQixVQUFZLEdBQ3BCbEIsRUFBUW9CLFVBQVVDLE9BQU8sY0FDekJ4QixFQUFVdUIsVUFBVUMsT0FBTyxXQUUvQixJQUdBbkIsRUFBVTZCLGlCQUFpQixTQUFTLFNBQUNDLEdBQ25DQSxFQUFFeUIsaUJBQ0ZsRCxFQUFNeUQsV0FDTm5FLEVBQVV5QyxNQUFRLEVBQ3BCLElBR0EyQixPQUFPQyxPQUFTLFdBQ2QzRCxFQUFNcUMsU0FDTjlDLFNBQVNHLGNBQWMsZUFBZWlCLFVBQVksYUFBSCxPQUFnQmlELEVBQVMsbUJBQzFFLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy91dGlscy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9kb21TZWxlY3Rvci5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy90b2Rvcy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdmFsaWRhdGVGb3JtID0gKFxuICBzdHIsIHJlcXVpcmVkID0gZmFsc2UsIG1pbkxlbmd0aCA9IDAsIG1heExlbmd0aCA9IDAsIHNwZWNpYWxDaGFyID0gdHJ1ZSxcbikgPT4ge1xuICBsZXQgaXNFcnJvciA9IGZhbHNlO1xuICBsZXQgbXNnID0gJyc7XG4gIHN0ciA9IHN0ci50cmltKCk7XG4gIGNvbnN0IGxlbiA9IHN0ci5sZW5ndGg7XG5cbiAgaWYgKHJlcXVpcmVkKSB7XG4gICAgaWYgKHN0ci5sZW5ndGggPD0gMCkge1xuICAgICAgaXNFcnJvciA9IHRydWU7XG4gICAgICBtc2cgPSAnVGhpcyBmaWVsZCBpcyBSZXF1aXJlZCEnO1xuICAgICAgcmV0dXJuIHsgaXNFcnJvciwgbXNnIH07XG4gICAgfVxuICB9XG5cbiAgaWYgKG1pbkxlbmd0aCA+IDApIHtcbiAgICBpZiAobGVuIDwgbWluTGVuZ3RoKSB7XG4gICAgICBpc0Vycm9yID0gdHJ1ZTtcbiAgICAgIG1zZyA9IGBUaGUgbWluIGNoYXJhY3RlciBsZW5ndGggb2YgdGhpcyBmaWVsZCBpcyAke21pbkxlbmd0aH1gO1xuICAgICAgcmV0dXJuIHsgaXNFcnJvciwgbXNnIH07XG4gICAgfVxuICB9XG5cbiAgaWYgKG1heExlbmd0aCA+IDApIHtcbiAgICBpZiAobGVuID4gbWF4TGVuZ3RoKSB7XG4gICAgICBpc0Vycm9yID0gdHJ1ZTtcbiAgICAgIG1zZyA9IGBUaGUgbWF4IGNoYXJhY3RlciBsZW5ndGggb2YgdGhpcyBmaWVsZCBpcyAke21heExlbmd0aH1gO1xuICAgICAgcmV0dXJuIHsgaXNFcnJvciwgbXNnIH07XG4gICAgfVxuICB9XG5cbiAgaWYgKCFzcGVjaWFsQ2hhcikge1xuICAgIGNvbnN0IG5ld1N0ciA9IHN0ci5yZXBsYWNlKC9cXHMvZywgJycpO1xuICAgIGNvbnN0IHJlID0gL15bQS1aYS16XVtBLVphLXowLTktXy5dKiQvO1xuICAgIGlmICghcmUudGVzdChuZXdTdHIpKSB7XG4gICAgICBpc0Vycm9yID0gdHJ1ZTtcbiAgICAgIG1zZyA9ICdUaGlzIGZpZWxkIGlzIG9ubHkgYWxsb3cgQS16MC05Xy4tIGNoYXJhY3RlcnMgYW5kIGFsc28gZmlyc3QgY2hhcmFjdGVyIHNob3VsZCBiZSBBLXonO1xuICAgICAgcmV0dXJuIHsgaXNFcnJvciwgbXNnIH07XG4gICAgfVxuICB9XG4gIHJldHVybiB7IGlzRXJyb3IsIG1zZyB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGVGb3JtOyIsImV4cG9ydCBjb25zdCBmb3JtSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24nKTtcbmV4cG9ydCBjb25zdCBzaG93TXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNob3ctbXNnJyk7XG5leHBvcnQgY29uc3QgYnRuU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1zdWJtaXQnKTtcbmV4cG9ydCBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8taXRlbXMtZ3JvcHUnKTtcbmV4cG9ydCBjb25zdCB0b2RvSXRlbXNEZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kby1kZXMnKTsiLCJpbXBvcnQgdmFsaWRhdGVGb3JtIGZyb20gJy4vdXRpbHMuanMnO1xuaW1wb3J0IHsgdG9kb0NvbnRhaW5lciwgZm9ybUlucHV0LCBzaG93TXNnIH0gZnJvbSAnLi9kb21TZWxlY3Rvci5qcyc7XG5cbi8vIEltcG9ydCBuZWNlc3NhcnkgYXNzZXRzIGZvcm0gc291cmNlXG5pbXBvcnQgdGhyZWVEb3RJY29uIGZyb20gJy4uL2Fzc2V0cy90aHJlZS1kb3QtMjQucG5nJztcbmltcG9ydCBkZWxldGVJY29uIGZyb20gJy4uL2Fzc2V0cy90cmFzaC0yNC5wbmcnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2RvcyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9kb3MnKSkge1xuICAgICAgdGhpcy50b2RvcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RvZG9zJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRvZG9zID0gW107XG4gICAgfVxuICB9XG5cbiAgc29ydEFuZFNhdmUgPSAoKSA9PiB7XG4gICAgY29uc3QgdG9kb0FyciA9IFsuLi50aGlzLnRvZG9zXTtcbiAgICAvLyBzb3J0aW5nIHRoZSBsaXN0XG4gICAgdG9kb0Fyci5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYS5pbmRleCA+IGIuaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGlmIChhLmluZGV4IDwgYi5pbmRleCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gMDtcbiAgICB9KTtcblxuICAgIC8vIHJlYXJyYW5nZSB0aGUgaW5kZXhcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIHRvZG9BcnIuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgaW5kZXggKz0gMTtcbiAgICAgIHRvZG8uaW5kZXggPSBpbmRleDtcbiAgICB9KTtcblxuICAgIHRoaXMudG9kb3MgPSBbLi4udG9kb0Fycl07XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG9zJywgSlNPTi5zdHJpbmdpZnkodGhpcy50b2RvcykpO1xuICB9XG5cbiAgLy8gUmVuZGVyIHRvZG8gbGlzdFxuICByZW5kZXIgPSAoKSA9PiB7XG4gICAgdG9kb0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBzaG93TXNnLmlubmVyVGV4dCA9ICcnO1xuICAgIHNob3dNc2cuY2xhc3NMaXN0LnJlbW92ZSgnZm9ybS1lcnJvcicpO1xuICAgIHRoaXMuc29ydEFuZFNhdmUoKTtcbiAgICBpZiAodGhpcy50b2Rvcy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnRvZG9zLmZvckVhY2goKHRvZG8pID0+IHtcbiAgICAgIC8vIGNyZWF0ZSB0b2RvIGl0ZW1cbiAgICAgICAgY29uc3QgdG9kb0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICB0b2RvSXRlbS5pZCA9IHRvZG8uaW5kZXg7XG4gICAgICAgIHRvZG9JdGVtLmNsYXNzTmFtZSA9ICd0b2RvLWl0ZW0nO1xuXG4gICAgICAgIC8vIHRvZG8gY2hlY2tib3hcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICAgICAgY2hlY2tib3guaWQgPSAndG9kby1jb21wbGVhdGUnO1xuXG4gICAgICAgIC8vIHRvZG8gZGVzY3JpcHRpb25cbiAgICAgICAgY29uc3QgdG9kb0RlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgdG9kb0Rlcy5jbGFzc05hbWUgPSAndG9kby1kZXMnO1xuICAgICAgICB0b2RvRGVzLmlubmVyVGV4dCA9IHRvZG8uZGVzY3JpcHRpb247XG5cbiAgICAgICAgLy8gQWRkIGV2ZW50IGxpc3RuZXIgaW4gdG9kbyBEZXNjcmlwdGlvblxuICAgICAgICB0b2RvRGVzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICB0aGlzLm9uQ2xpY2tUb2RvRGVzKGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyB0b2RvIFRocmVlIGRvdCBidXR0b25cbiAgICAgICAgY29uc3QgdGhyZWVEb3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgdGhyZWVEb3RCdXR0b24uY2xhc3NOYW1lID0gJ2J0bi10aHJlZS1kb3QnO1xuICAgICAgICB0aHJlZURvdEJ1dHRvbi5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCIke3RocmVlRG90SWNvbn1cIiBhbHQ9XCIuLi5cIj5gO1xuXG4gICAgICAgIC8vIEFwcGVuZCBhbGwgdGhlIHRvZG8gZWxlbWVudHMgaW5zaWRlIHRoZSB0b2RvSXRlbXNcbiAgICAgICAgdG9kb0l0ZW0uYXBwZW5kKGNoZWNrYm94LCB0b2RvRGVzLCB0aHJlZURvdEJ1dHRvbik7XG5cbiAgICAgICAgLy8gYXBwZW50IHRoZSB0b2RvIGl0ZW0gaW5zaWRlIHRvZG9Db250YWluZXJcbiAgICAgICAgdG9kb0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2RvSXRlbSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9kb0NvbnRhaW5lci5pbm5lckhUTUwgPSAnPHAgY2xhc3M9XCJuby1pdGVtXCI+VGhlcmUgaXMgbm8gdG9kbyB0byBzaG93ISBQbGVhc2UgYWRkIGEgbmV3IG9uZS48L3A+JztcbiAgICB9XG4gIH1cblxuICAvLyBvblN1Ym1pdCBtZXRob2RcbiAgb25TdWJtaXQgPSAoKSA9PiB7XG4gICAgLy8gVmFsaWRhdGUgdGhlIGZvcm1cbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZvcm1JbnB1dC52YWx1ZTtcbiAgICBjb25zdCByZXF1aXJlZCA9IHRydWU7XG4gICAgY29uc3QgbWluTGVuZ3RoID0gMztcbiAgICBjb25zdCBtYXhMZW5ndGggPSAyNTU7XG4gICAgY29uc3Qgc3BlY2lhbENoYXIgPSBmYWxzZTtcbiAgICBjb25zdCBpc1ZhbGlkID0gdmFsaWRhdGVGb3JtKGRlc2NyaXB0aW9uLCByZXF1aXJlZCwgbWluTGVuZ3RoLCBtYXhMZW5ndGgsIHNwZWNpYWxDaGFyKTtcblxuICAgIC8vIENoZWNrIGlmIGZvcm0gaGFzIGVycm9yIG9yIG5vdFxuXG4gICAgaWYgKGlzVmFsaWQuaXNFcnJvciA9PT0gdHJ1ZSAmJiBpc1ZhbGlkLm1zZy5sZW5ndGggPj0gMCkge1xuICAgICAgc2hvd01zZy5jbGFzc0xpc3QuYWRkKCdmb3JtLWVycm9yJyk7XG4gICAgICBzaG93TXNnLnRleHRDb250ZW50ID0gaXNWYWxpZC5tc2c7XG4gICAgICBmb3JtSW5wdXQuY2xhc3NMaXN0LmFkZCgnaW52YWxpZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiBmb3JtIGlzIGVtcHR5IGFkZCBhIG5ldyB0b2RvXG4gICAgICBzaG93TXNnLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm0tZXJyb3InKTtcbiAgICAgIHNob3dNc2cudGV4dENvbnRlbnQgPSAnJztcbiAgICAgIGZvcm1JbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdpbnZhbGlkJyk7XG4gICAgICBmb3JtSW5wdXQudmFsdWUgPSAnJztcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy50b2Rvcy5sZW5ndGggKyAxIHx8IDE7XG4gICAgICBjb25zdCB0b2RvID0ge1xuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICAgICAgaW5kZXgsXG4gICAgICB9O1xuICAgICAgdGhpcy50b2RvcyA9IFsuLi50aGlzLnRvZG9zLCB0b2RvXTtcbiAgICAgIC8vIHJlbmRlciB0aGUgbmV3IHRvZG9zIG9uIHRoZSBkb21cbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlID0gKGluZGV4KSA9PiB7XG4gICAgdGhpcy50b2RvcyA9IHRoaXMudG9kb3MuZmlsdGVyKCh0KSA9PiB0LmluZGV4LnRvU3RyaW5nKCkgIT09IGluZGV4KTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLy8gZWRpdCB0b2RvXG4gIGVkaXQgPSAoZSkgPT4ge1xuICAgIGNvbnN0IHsgdmFsdWUgfSA9IGUudGFyZ2V0O1xuXG4gICAgLy8gdmFsaWRhdGUgZm9ybVxuICAgIGNvbnN0IHJlcXVpcmVkID0gdHJ1ZTtcbiAgICBjb25zdCBtaW5MZW5ndGggPSAzO1xuICAgIGNvbnN0IG1heExlbmd0aCA9IDI1NTtcbiAgICBjb25zdCBzcGVjaWFsQ2hhciA9IGZhbHNlO1xuICAgIGNvbnN0IGlzVmFsaWQgPSB2YWxpZGF0ZUZvcm0odmFsdWUsIHJlcXVpcmVkLCBtaW5MZW5ndGgsIG1heExlbmd0aCwgc3BlY2lhbENoYXIpO1xuICAgIGlmIChpc1ZhbGlkLmlzRXJyb3IgPT09IHRydWUgJiYgaXNWYWxpZC5tc2cubGVuZ3RoID4gMCkge1xuICAgICAgc2hvd01zZy5jbGFzc0xpc3QuYWRkKCdmb3JtLWVycm9yJyk7XG4gICAgICBzaG93TXNnLnRleHRDb250ZW50ID0gaXNWYWxpZC5tc2c7XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdpbnZhbGlkLWVkaXQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZC1lZGl0Jyk7XG4gICAgICBjb25zdCBpbmRleCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuaWQ7XG4gICAgICBjb25zdCBuZXdBcnIgPSBbLi4udGhpcy50b2Rvc107XG4gICAgICBjb25zdCBpbmR4ID0gbmV3QXJyLmZpbmRJbmRleCgoaXRlbSkgPT4gaW5kZXggPT09IGl0ZW0uaW5kZXgudG9TdHJpbmcoKSk7XG4gICAgICBpZiAoaW5keCA+PSAwKSB7XG4gICAgICAgIG5ld0FycltpbmR4XS5kZXNjcmlwdGlvbiA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgdGhpcy50b2RvcyA9IFsuLi5uZXdBcnJdO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICAvLyBvbkNsaWNrRGVzIGVuZW50IG1ldGhvZFxuICBvbkNsaWNrVG9kb0RlcyA9IChlKSA9PiB7XG4gICAgLy8gdGFyZ2V0Lm91dGVySFRNTCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgY29uc3QgcGFyZW50ID0gZS50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICBwYXJlbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAvLyB0b2RvIGNoZWNrYm94XG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuICAgIGNoZWNrYm94LmlkID0gJ3RvZG8tY29tcGxlYXRlJztcblxuICAgIC8vIHRvZG8gZGVzY3JpcHRpb25cbiAgICBjb25zdCB0b2RvRWRpdElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB0b2RvRWRpdElucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgdG9kb0VkaXRJbnB1dC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgZS50YXJnZXQuaW5uZXJUZXh0KTtcbiAgICB0b2RvRWRpdElucHV0LmNsYXNzTmFtZSA9ICd0b2RvLWVkaXQtaW5wdXQnO1xuXG4gICAgLy8gQWRkIGV2ZW50IG9uIGtleXByZXNzIGluIHRoZSB0ZXh0YXJlYVxuICAgIHRvZG9FZGl0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5lZGl0KGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2hvd01zZy5jbGFzc0xpc3QucmVtb3ZlKCdmb3JtLWVycm9yJyk7XG4gICAgICAgIHNob3dNc2cuaW5uZXJUZXh0ID0gJyc7XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQtZWRpdCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gdG9kbyBEZWxldGUgZG90IGJ1dHRvblxuICAgIGNvbnN0IGRlbGV0ZVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBkZWxldGVUb2RvLmNsYXNzTmFtZSA9ICdidG4tZGVsZXRlJztcbiAgICBkZWxldGVUb2RvLmlubmVySFRNTCA9IGA8aW1nIHNyYz1cIiR7ZGVsZXRlSWNvbn1cIiBhbHQ9XCJYXCI+YDtcblxuICAgIC8vIGFkZGluZyBldmVudCBvbiBkZWxldGUgaWNvblxuICAgIGRlbGV0ZVRvZG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcmVudC5pZDtcbiAgICAgIHRoaXMuZGVsZXRlKGluZGV4KTtcbiAgICB9KTtcblxuICAgIHBhcmVudC5hcHBlbmQoY2hlY2tib3gsIHRvZG9FZGl0SW5wdXQsIGRlbGV0ZVRvZG8pO1xuICB9XG59IiwiaW1wb3J0ICcuL3N0eWxlLmNzcyc7XG5pbXBvcnQgVG9kb3MgZnJvbSAnLi9tb2R1bGVzL3RvZG9zLmpzJztcbmltcG9ydCB7XG4gIGZvcm1JbnB1dCwgYnRuU3VibWl0LCBzaG93TXNnLFxufSBmcm9tICcuL21vZHVsZXMvZG9tU2VsZWN0b3IuanMnO1xuXG4vLyBJbXBvcnQgbmVjZXNzYXJ5IGFzc2V0cyBmb3JtIHNvdXJjZVxuaW1wb3J0IGVudGVySWNvbiBmcm9tICcuL2Fzc2V0cy9lbnRlci0yNC5wbmcnO1xuXG4vLyBJbml0aWFsaXplIHRoZSB0b2Rvc1xuY29uc3QgdG9kb3MgPSBuZXcgVG9kb3MoKTtcblxuLy8gdG9kbyBzdWJtaXQgZXZlbnQgdXNpbmcgRW50ZXIgYnV0dG9uLlxuZm9ybUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHtcbiAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRvZG9zLm9uU3VibWl0KCk7XG4gIH0gZWxzZSB7XG4gICAgc2hvd01zZy5pbm5lckhUTUwgPSAnJztcbiAgICBzaG93TXNnLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm0tZXJyb3InKTtcbiAgICBmb3JtSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcpO1xuICB9XG59KTtcblxuLy8gdG9kbyBzdWJtaXQgZXZlbnQgdXNpbmcgc3VibWl0IGJ1dHRvblxuYnRuU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB0b2Rvcy5vblN1Ym1pdCgpO1xuICBmb3JtSW5wdXQudmFsdWUgPSAnJztcbn0pO1xuXG4vLyBMb2FkIHRoZSB0b2RvIGxpc3Qgb24gdGhlIGZseS5cbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG4gIHRvZG9zLnJlbmRlcigpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLXN1Ym1pdCcpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0nJHtlbnRlckljb259JyBhbHQ9J3N1Ym1pdCcvPmA7XG59O1xuIl0sIm5hbWVzIjpbInN0ciIsInJlcXVpcmVkIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwic3BlY2lhbENoYXIiLCJpc0Vycm9yIiwibXNnIiwibGVuIiwidHJpbSIsImxlbmd0aCIsIm5ld1N0ciIsInJlcGxhY2UiLCJyZSIsInRlc3QiLCJmb3JtSW5wdXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2hvd01zZyIsInF1ZXJ5U2VsZWN0b3IiLCJidG5TdWJtaXQiLCJ0b2RvQ29udGFpbmVyIiwicXVlcnlTZWxlY3RvckFsbCIsIlRvZG9zIiwidG9kb0FyciIsInRvZG9zIiwic29ydCIsImEiLCJiIiwiaW5kZXgiLCJmb3JFYWNoIiwidG9kbyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiaW5uZXJIVE1MIiwiaW5uZXJUZXh0IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic29ydEFuZFNhdmUiLCJ0b2RvSXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImNsYXNzTmFtZSIsImNoZWNrYm94Iiwic2V0QXR0cmlidXRlIiwidG9kb0RlcyIsImRlc2NyaXB0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJvbkNsaWNrVG9kb0RlcyIsInRocmVlRG90QnV0dG9uIiwidGhyZWVEb3RJY29uIiwiYXBwZW5kIiwiYXBwZW5kQ2hpbGQiLCJ2YWx1ZSIsImlzVmFsaWQiLCJ2YWxpZGF0ZUZvcm0iLCJhZGQiLCJ0ZXh0Q29udGVudCIsImNvbXBsZXRlZCIsInJlbmRlciIsImZpbHRlciIsInQiLCJ0b1N0cmluZyIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJuZXdBcnIiLCJpbmR4IiwiZmluZEluZGV4IiwiaXRlbSIsInBhcmVudCIsInRvZG9FZGl0SW5wdXQiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsImVkaXQiLCJkZWxldGVUb2RvIiwiZGVsZXRlSWNvbiIsImdldEl0ZW0iLCJ0aGlzIiwicGFyc2UiLCJvblN1Ym1pdCIsIndpbmRvdyIsIm9ubG9hZCIsImVudGVySWNvbiJdLCJzb3VyY2VSb290IjoiIn0=